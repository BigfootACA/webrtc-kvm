/*
 *
 * Copyright (C) 2024 BigfootACA <bigfoot@classfun.cn>
 *
 * SPDX-License-Identifier: GPL-3.0-or-later
 *
 */

#include"../ffmpeg.h"
#include<linux/videodev2.h>

uint32_t AVPixelFormatToFourcc(AVPixelFormat f){
	switch(f){
		case AV_PIX_FMT_RGB32:return V4L2_PIX_FMT_RGB32;
		case AV_PIX_FMT_ARGB:return V4L2_PIX_FMT_ARGB32;
		case AV_PIX_FMT_RGB565:return V4L2_PIX_FMT_RGB565;
		case AV_PIX_FMT_RGB555:return V4L2_PIX_FMT_RGB555;
		case AV_PIX_FMT_RGB24:return V4L2_PIX_FMT_RGB24;
		case AV_PIX_FMT_RGB444:return V4L2_PIX_FMT_RGB444;
		case AV_PIX_FMT_BGR32:return V4L2_PIX_FMT_BGR32;
		case AV_PIX_FMT_BGR24:return V4L2_PIX_FMT_BGR24;
		case AV_PIX_FMT_YUV420P:return V4L2_PIX_FMT_YUV420;
		case AV_PIX_FMT_YUYV422:return V4L2_PIX_FMT_YUYV;
		case AV_PIX_FMT_YUV422P:return V4L2_PIX_FMT_YUV422P;
		case AV_PIX_FMT_YUV444P:return V4L2_PIX_FMT_YUV444;
		case AV_PIX_FMT_YUV410P:return V4L2_PIX_FMT_YUV410;
		case AV_PIX_FMT_YUV411P:return V4L2_PIX_FMT_YUV411P;
		case AV_PIX_FMT_GRAY8:return V4L2_PIX_FMT_GREY;
		case AV_PIX_FMT_PAL8:return V4L2_PIX_FMT_PAL8;
		case AV_PIX_FMT_UYVY422:return V4L2_PIX_FMT_UYVY;
		case AV_PIX_FMT_RGB8:return V4L2_PIX_FMT_RGB332;
		case AV_PIX_FMT_NV12:return V4L2_PIX_FMT_NV12;
		case AV_PIX_FMT_NV21:return V4L2_PIX_FMT_NV21;
		case AV_PIX_FMT_ABGR:return V4L2_PIX_FMT_ABGR32;
		case AV_PIX_FMT_GRAY16BE:return V4L2_PIX_FMT_Y16_BE;
		case AV_PIX_FMT_GRAY16LE:return V4L2_PIX_FMT_Y16;
		case AV_PIX_FMT_BGR48:return V4L2_PIX_FMT_BGR48_12;
		case AV_PIX_FMT_NV16:return V4L2_PIX_FMT_NV16;
		case AV_PIX_FMT_YVYU422:return V4L2_PIX_FMT_YVYU;
		case AV_PIX_FMT_0RGB:return V4L2_PIX_FMT_XRGB32;
		case AV_PIX_FMT_RGB0:return V4L2_PIX_FMT_RGBX32;
		case AV_PIX_FMT_0BGR:return V4L2_PIX_FMT_XBGR32;
		case AV_PIX_FMT_BGR0:return V4L2_PIX_FMT_BGRX32;
		case AV_PIX_FMT_BAYER_BGGR8:return V4L2_PIX_FMT_SBGGR8;
		case AV_PIX_FMT_BAYER_RGGB8:return V4L2_PIX_FMT_SRGGB8;
		case AV_PIX_FMT_BAYER_GBRG8:return V4L2_PIX_FMT_SGBRG8;
		case AV_PIX_FMT_BAYER_GRBG8:return V4L2_PIX_FMT_SGRBG8;
		case AV_PIX_FMT_BAYER_BGGR16:return V4L2_PIX_FMT_SBGGR16;
		case AV_PIX_FMT_BAYER_RGGB16:return V4L2_PIX_FMT_SRGGB16;
		case AV_PIX_FMT_BAYER_GBRG16:return V4L2_PIX_FMT_SGBRG16;
		case AV_PIX_FMT_BAYER_GRBG16:return V4L2_PIX_FMT_SGRBG16;
		case AV_PIX_FMT_GRAY12:return V4L2_PIX_FMT_Y12;
		case AV_PIX_FMT_GRAY10:return V4L2_PIX_FMT_Y10;
		case AV_PIX_FMT_GRAY14:return V4L2_PIX_FMT_Y14;
		case AV_PIX_FMT_NV24:return V4L2_PIX_FMT_NV24;
		case AV_PIX_FMT_NV42:return V4L2_PIX_FMT_NV42;
		case AV_PIX_FMT_Y210:return V4L2_PIX_FMT_Y210;
		case AV_PIX_FMT_X2RGB10:return V4L2_PIX_FMT_ARGB2101010;
		default:return 0;
	}
}

AVPixelFormat FourccToAVPixelFormat(uint32_t f){
	switch(f){
		case V4L2_PIX_FMT_RGB32:return AV_PIX_FMT_RGB32;
		case V4L2_PIX_FMT_ARGB32:return AV_PIX_FMT_ARGB;
		case V4L2_PIX_FMT_RGB565:return AV_PIX_FMT_RGB565;
		case V4L2_PIX_FMT_RGB555:return AV_PIX_FMT_RGB555;
		case V4L2_PIX_FMT_RGB24:return AV_PIX_FMT_RGB24;
		case V4L2_PIX_FMT_RGB444:return AV_PIX_FMT_RGB444;
		case V4L2_PIX_FMT_BGR32:return AV_PIX_FMT_BGR32;
		case V4L2_PIX_FMT_BGR24:return AV_PIX_FMT_BGR24;
		case V4L2_PIX_FMT_YUV420:return AV_PIX_FMT_YUV420P;
		case V4L2_PIX_FMT_YUYV:return AV_PIX_FMT_YUYV422;
		case V4L2_PIX_FMT_YUV422P:return AV_PIX_FMT_YUV422P;
		case V4L2_PIX_FMT_YUV444:return AV_PIX_FMT_YUV444P;
		case V4L2_PIX_FMT_YUV410:return AV_PIX_FMT_YUV410P;
		case V4L2_PIX_FMT_YUV411P:return AV_PIX_FMT_YUV411P;
		case V4L2_PIX_FMT_GREY:return AV_PIX_FMT_GRAY8;
		case V4L2_PIX_FMT_PAL8:return AV_PIX_FMT_PAL8;
		case V4L2_PIX_FMT_UYVY:return AV_PIX_FMT_UYVY422;
		case V4L2_PIX_FMT_RGB332:return AV_PIX_FMT_RGB8;
		case V4L2_PIX_FMT_NV12:return AV_PIX_FMT_NV12;
		case V4L2_PIX_FMT_NV21:return AV_PIX_FMT_NV21;
		case V4L2_PIX_FMT_ABGR32:return AV_PIX_FMT_ABGR;
		case V4L2_PIX_FMT_Y16_BE:return AV_PIX_FMT_GRAY16BE;
		case V4L2_PIX_FMT_Y16:return AV_PIX_FMT_GRAY16LE;
		case V4L2_PIX_FMT_BGR48_12:return AV_PIX_FMT_BGR48;
		case V4L2_PIX_FMT_NV16:return AV_PIX_FMT_NV16;
		case V4L2_PIX_FMT_YVYU:return AV_PIX_FMT_YVYU422;
		case V4L2_PIX_FMT_XRGB32:return AV_PIX_FMT_0RGB;
		case V4L2_PIX_FMT_RGBX32:return AV_PIX_FMT_RGB0;
		case V4L2_PIX_FMT_XBGR32:return AV_PIX_FMT_0BGR;
		case V4L2_PIX_FMT_BGRX32:return AV_PIX_FMT_BGR0;
		case V4L2_PIX_FMT_SBGGR8:return AV_PIX_FMT_BAYER_BGGR8;
		case V4L2_PIX_FMT_SRGGB8:return AV_PIX_FMT_BAYER_RGGB8;
		case V4L2_PIX_FMT_SGBRG8:return AV_PIX_FMT_BAYER_GBRG8;
		case V4L2_PIX_FMT_SGRBG8:return AV_PIX_FMT_BAYER_GRBG8;
		case V4L2_PIX_FMT_SBGGR16:return AV_PIX_FMT_BAYER_BGGR16;
		case V4L2_PIX_FMT_SRGGB16:return AV_PIX_FMT_BAYER_RGGB16;
		case V4L2_PIX_FMT_SGBRG16:return AV_PIX_FMT_BAYER_GBRG16;
		case V4L2_PIX_FMT_SGRBG16:return AV_PIX_FMT_BAYER_GRBG16;
		case V4L2_PIX_FMT_Y12:return AV_PIX_FMT_GRAY12;
		case V4L2_PIX_FMT_Y10:return AV_PIX_FMT_GRAY10;
		case V4L2_PIX_FMT_Y14:return AV_PIX_FMT_GRAY14;
		case V4L2_PIX_FMT_NV24:return AV_PIX_FMT_NV24;
		case V4L2_PIX_FMT_NV42:return AV_PIX_FMT_NV42;
		case V4L2_PIX_FMT_Y210:return AV_PIX_FMT_Y210;
		case V4L2_PIX_FMT_ARGB2101010:return AV_PIX_FMT_X2RGB10;
		default:return AV_PIX_FMT_NONE;
	}
}
